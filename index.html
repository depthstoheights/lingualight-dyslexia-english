<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>LinguaLight - English Learning for Dyslexic Adults</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        @font-face {
            font-family: 'OpenDyslexic';
            src: url('data:font/woff2;base64,') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        :root {
            --primary: #4A7C7E;
            --secondary: #7BA7BC;
            --accent: #F4E4C1;
            --success: #6B9080;
            --warning: #E09F3E;
            --danger: #C73E1D;
            --text: #2C3E50;
            --light-text: #5D6D7E;
            --bg-cream: #FFF8E7;
            --bg-light: #F5F5F5;
            --dyslexia-yellow: #FFFACD;
            --dyslexia-blue: #E6F3FF;
            --dyslexia-green: #E8F5E9;
            --dyslexia-peach: #FFE5CC;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: var(--bg-cream);
            color: var(--text);
            line-height: 1.8;
            letter-spacing: 0.05em;
            word-spacing: 0.1em;
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        body.dyslexic-font {
            font-family: 'OpenDyslexic', 'Comic Sans MS', sans-serif;
        }

        body.high-contrast {
            background: #000;
            color: #FFF;
        }

        body.high-contrast .screen {
            background: #000;
            color: #FFF;
        }

        .screen {
            display: none;
            min-height: calc(100vh - 80px);
            padding: 20px;
            animation: fadeIn 0.4s ease-in-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Accessibility Toolbar */
        .accessibility-toolbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .tool-btn {
            padding: 8px 12px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .tool-btn:hover {
            background: var(--primary);
            color: white;
        }

        .tool-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Back Button */
        .back-button {
            background: white;
            border: 3px solid var(--primary);
            color: var(--primary);
            padding: 12px 24px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin: 60px 0 20px 0;
            transition: all 0.3s;
            font-size: 16px;
        }

        .back-button:hover {
            background: var(--primary);
            color: white;
            transform: translateX(-5px);
        }

        /* Opening Screen */
        .opening-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 80px 20px 40px;
            min-height: 100vh;
        }

        .logo {
            font-size: 80px;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .opening-screen h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: var(--primary);
            font-weight: bold;
        }

        .opening-screen p {
            font-size: 1.2em;
            line-height: 1.8;
            margin-bottom: 30px;
            max-width: 600px;
        }

        /* Dashboard */
        .dashboard-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            margin: 60px -20px 25px;
            padding: 40px 20px;
            color: white;
            text-align: center;
            border-radius: 0 0 30px 30px;
        }

        .dashboard-header h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        /* Severity Selection */
        .severity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .severity-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            text-align: center;
        }

        .severity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }

        .severity-card.mild {
            border-color: var(--success);
        }

        .severity-card.moderate {
            border-color: var(--warning);
        }

        .severity-card.severe {
            border-color: var(--danger);
        }

        .severity-card h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: var(--text);
        }

        .severity-card .icon {
            font-size: 50px;
            margin-bottom: 20px;
        }

        /* Learning Modules */
        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .module-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            border: 2px solid transparent;
        }

        .module-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            border-color: var(--primary);
        }

        .module-card .icon {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .module-card h4 {
            font-size: 1.1em;
            color: var(--text);
            margin-bottom: 10px;
        }

        /* Content Cards */
        .content-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
        }

        .content-card h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        /* Word Cards for Learning */
        .word-card {
            background: var(--dyslexia-yellow);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            border: 3px solid var(--primary);
        }

        .word-card .word {
            font-size: 3em;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 20px;
            letter-spacing: 0.1em;
        }

        .word-card .phonetics {
            font-size: 1.5em;
            color: var(--secondary);
            margin-bottom: 15px;
            font-style: italic;
        }

        .word-card .definition {
            font-size: 1.2em;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .word-card .example {
            background: white;
            padding: 15px;
            border-radius: 10px;
            font-style: italic;
            margin-top: 15px;
        }

        /* Interactive Exercise */
        .exercise-container {
            background: var(--dyslexia-blue);
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
        }

        .exercise-container h4 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .drag-area {
            min-height: 100px;
            background: white;
            border: 3px dashed var(--secondary);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: center;
        }

        .draggable-word {
            background: var(--accent);
            padding: 12px 20px;
            border-radius: 10px;
            cursor: move;
            font-size: 1.2em;
            font-weight: bold;
            border: 2px solid var(--primary);
            transition: all 0.3s;
        }

        .draggable-word:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        /* Visual Learning Grid */
        .visual-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .visual-card {
            background: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .visual-card:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .visual-card .image {
            font-size: 60px;
            margin-bottom: 15px;
        }

        .visual-card .label {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--text);
        }

        /* Progress Tracking */
        .progress-container {
            background: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
        }

        .progress-bar {
            background: #E0E0E0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--success) 0%, var(--primary) 100%);
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Forms */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--text);
            font-size: 1.1em;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 3px solid #E0E0E0;
            border-radius: 10px;
            font-size: 1.1em;
            transition: all 0.3s;
            background: white;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 124, 126, 0.1);
        }

        /* Buttons */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(74, 124, 126, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-warning {
            background: var(--warning);
        }

        .btn-full {
            width: 100%;
        }

        /* Audio Controls */
        .audio-controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .audio-btn {
            background: var(--accent);
            border: 3px solid var(--primary);
            padding: 12px 24px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .audio-btn:hover {
            background: var(--primary);
            color: white;
        }

        .audio-btn.playing {
            background: var(--primary);
            color: white;
        }

        /* Speed Control */
        .speed-control {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
            padding: 15px;
            background: var(--dyslexia-green);
            border-radius: 15px;
        }

        .speed-control label {
            font-weight: bold;
            font-size: 1.1em;
        }

        .speed-control input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: white;
            outline: none;
        }

        .speed-control .speed-value {
            font-weight: bold;
            color: var(--primary);
            font-size: 1.2em;
            min-width: 50px;
            text-align: center;
        }

        /* Text Overlay */
        .text-overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            z-index: 2000;
            max-width: 80%;
            display: none;
        }

        .text-overlay.active {
            display: block;
        }

        .text-overlay .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 30px;
            cursor: pointer;
            color: var(--danger);
        }

        /* Reading Ruler */
        .reading-ruler {
            position: fixed;
            left: 0;
            right: 0;
            height: 40px;
            background: rgba(255, 255, 0, 0.3);
            pointer-events: none;
            display: none;
            z-index: 500;
        }

        .reading-ruler.active {
            display: block;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -3px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 80px;
            z-index: 999;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--light-text);
        }

        .nav-item:hover {
            color: var(--primary);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item .icon {
            font-size: 28px;
            display: block;
            margin-bottom: 5px;
        }

        .nav-item .label {
            font-size: 0.85em;
            font-weight: bold;
        }

        /* Messages */
        .message {
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            animation: slideIn 0.3s ease;
            font-size: 1.1em;
            font-weight: 500;
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .message.success {
            background: var(--dyslexia-green);
            color: #2E7D32;
            border-left: 5px solid var(--success);
        }

        .message.info {
            background: var(--dyslexia-blue);
            color: #1565C0;
            border-left: 5px solid var(--secondary);
        }

        .message.warning {
            background: var(--dyslexia-peach);
            color: #E65100;
            border-left: 5px solid var(--warning);
        }

        /* Statistics Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .stat-card .number {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-card .label {
            font-size: 1em;
            color: var(--light-text);
            margin-top: 5px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .accessibility-toolbar {
                padding: 5px;
            }
            
            .tool-btn {
                padding: 6px 10px;
                font-size: 12px;
            }
            
            .severity-grid {
                grid-template-columns: 1fr;
            }
            
            .module-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .visual-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Highlighting for focus */
        .highlight-focus {
            animation: highlight 2s ease-in-out infinite;
        }

        @keyframes highlight {
            0%, 100% { background: transparent; }
            50% { background: rgba(255, 255, 0, 0.3); }
        }

        /* Line Height Options */
        body.line-spacing-large {
            line-height: 2.2;
        }

        body.line-spacing-extra {
            line-height: 2.5;
        }

        /* Font Size Options */
        body.font-large {
            font-size: 120%;
        }

        body.font-extra-large {
            font-size: 140%;
        }

        /* Syllable Highlighting */
        .syllable {
            display: inline-block;
            padding: 2px 4px;
            margin: 0 2px;
            border-radius: 4px;
        }

        .syllable:nth-child(odd) {
            background: var(--dyslexia-yellow);
        }

        .syllable:nth-child(even) {
            background: var(--dyslexia-blue);
        }
    </style>
</head>
<body>
    <!-- Accessibility Toolbar -->
    <div class="accessibility-toolbar">
        <button class="tool-btn" onclick="toggleDyslexicFont()">
            <span>🔤</span> Dyslexic Font
        </button>
        <button class="tool-btn" onclick="toggleHighContrast()">
            <span>🔲</span> High Contrast
        </button>
        <button class="tool-btn" onclick="toggleRuler()">
            <span>📏</span> Reading Ruler
        </button>
        <button class="tool-btn" onclick="increaseFontSize()">
            <span>🔍+</span> Larger Text
        </button>
        <button class="tool-btn" onclick="increaseLineSpacing()">
            <span>↕️</span> Line Spacing
        </button>
        <button class="tool-btn" onclick="changeBackground()">
            <span>🎨</span> Background
        </button>
    </div>

    <!-- Reading Ruler -->
    <div class="reading-ruler" id="readingRuler"></div>

    <!-- Audio Element -->
    <audio id="textToSpeech"></audio>

    <!-- Opening Screen -->
    <div class="screen active" id="openingScreen">
        <div class="opening-screen">
            <div class="logo">💡</div>
            <h1>LinguaLight</h1>
            <p>English Learning Designed for Dyslexic Adults</p>
            
            <div style="background: white; padding: 30px; border-radius: 20px; margin: 30px 0; box-shadow: 0 5px 20px rgba(0,0,0,0.1);">
                <h2 style="color: var(--primary); margin-bottom: 20px;">Welcome to Your Learning Journey</h2>
                <p style="line-height: 1.8; margin-bottom: 20px;">
                    LinguaLight uses evidence-based methods specifically designed for adults with dyslexia learning English. 
                    Our multi-sensory approach combines visual, auditory, and kinesthetic learning to make language acquisition 
                    accessible and enjoyable.
                </p>
                <div style="text-align: left; background: var(--dyslexia-yellow); padding: 20px; border-radius: 15px; margin: 20px 0;">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Features Designed for You:</h3>
                    <ul style="line-height: 2; margin-left: 20px;">
                        <li>✓ Customizable text display and fonts</li>
                        <li>✓ Color-coded phonics and syllables</li>
                        <li>✓ Adjustable reading speed and repetition</li>
                        <li>✓ Visual word mapping and associations</li>
                        <li>✓ Progress tracking adapted to your pace</li>
                        <li>✓ Multi-sensory learning exercises</li>
                    </ul>
                </div>
            </div>
            
            <button class="btn" onclick="startApp()" style="font-size: 1.3em; padding: 20px 40px;">
                Begin Your Journey
            </button>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="screen" id="dashboard">
        <div class="dashboard-header">
            <h2>Welcome Back, Learner!</h2>
            <p id="dashboardDate"></p>
            <p>Choose your learning path based on your needs</p>
        </div>

        <div class="progress-container">
            <h3>Your Overall Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="mainProgress" style="width: 0%">0%</div>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="number" id="wordsLearned">0</div>
                    <div class="label">Words Learned</div>
                </div>
                <div class="stat-card">
                    <div class="number" id="lessonsCompleted">0</div>
                    <div class="label">Lessons Done</div>
                </div>
                <div class="stat-card">
                    <div class="number" id="practiceMinutes">0</div>
                    <div class="label">Minutes Practiced</div>
                </div>
                <div class="stat-card">
                    <div class="number" id="streakDays">0</div>
                    <div class="label">Day Streak</div>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h3>Select Your Dyslexia Support Level</h3>
            <p style="margin-bottom: 20px;">Choose the level that best matches your needs. You can change this anytime.</p>
            
            <div class="severity-grid">
                <div class="severity-card mild" onclick="selectSeverity('mild')">
                    <div class="icon">🟢</div>
                    <h3>Mild Support</h3>
                    <p>Basic accommodations with standard pacing</p>
                    <ul style="text-align: left; margin-top: 15px; line-height: 1.8;">
                        <li>• Standard lesson duration</li>
                        <li>• Basic visual aids</li>
                        <li>• Regular repetition</li>
                        <li>• Simple color coding</li>
                    </ul>
                </div>
                
                <div class="severity-card moderate" onclick="selectSeverity('moderate')">
                    <div class="icon">🟡</div>
                    <h3>Moderate Support</h3>
                    <p>Enhanced tools and adjusted pacing</p>
                    <ul style="text-align: left; margin-top: 15px; line-height: 1.8;">
                        <li>• Slower lesson pace</li>
                        <li>• Enhanced visual mapping</li>
                        <li>• More repetition cycles</li>
                        <li>• Syllable breakdown</li>
                    </ul>
                </div>
                
                <div class="severity-card severe" onclick="selectSeverity('severe')">
                    <div class="icon">🔴</div>
                    <h3>Intensive Support</h3>
                    <p>Maximum accommodations and flexibility</p>
                    <ul style="text-align: left; margin-top: 15px; line-height: 1.8;">
                        <li>• Self-paced learning</li>
                        <li>• Maximum visual support</li>
                        <li>• Extensive repetition</li>
                        <li>• Full multi-sensory tools</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Mild Dyslexia Learning Path -->
    <div class="screen" id="mildPath">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Dashboard</button>
        
        <div class="content-card">
            <h2 style="color: var(--primary); margin-bottom: 20px;">Mild Dyslexia Learning Path</h2>
            <p>Structured lessons with basic accommodations for successful learning.</p>
        </div>

        <div class="module-grid">
            <div class="module-card" onclick="startPhonics('mild')">
                <div class="icon">🔤</div>
                <h4>Phonics Basics</h4>
                <p>Sound-letter connections</p>
            </div>
            
            <div class="module-card" onclick="startVocabulary('mild')">
                <div class="icon">📚</div>
                <h4>Vocabulary Building</h4>
                <p>Essential words</p>
            </div>
            
            <div class="module-card" onclick="startReading('mild')">
                <div class="icon">📖</div>
                <h4>Reading Practice</h4>
                <p>Short passages</p>
            </div>
            
            <div class="module-card" onclick="startListening('mild')">
                <div class="icon">🎧</div>
                <h4>Listening Skills</h4>
                <p>Audio comprehension</p>
            </div>
            
            <div class="module-card" onclick="startSpeaking('mild')">
                <div class="icon">🗣️</div>
                <h4>Speaking Practice</h4>
                <p>Pronunciation</p>
            </div>
            
            <div class="module-card" onclick="startWriting('mild')">
                <div class="icon">✍️</div>
                <h4>Writing Basics</h4>
                <p>Simple sentences</p>
            </div>
        </div>

        <div class="content-card">
            <h3>Today's Featured Lesson</h3>
            <div class="word-card">
                <div class="word">FRIEND</div>
                <div class="phonetics">/frend/</div>
                <div class="definition">A person you know well and like</div>
                <div class="audio-controls">
                    <button class="audio-btn" onclick="playWord('friend')">
                        <span>🔊</span> Play Word
                    </button>
                    <button class="audio-btn" onclick="playWordSlow('friend')">
                        <span>🐌</span> Play Slowly
                    </button>
                </div>
                <div class="example">
                    "My <strong>friend</strong> helps me learn English."
                </div>
            </div>
            
            <button class="btn btn-full" onclick="practiceWord('friend', 'mild')">Practice This Word</button>
        </div>
    </div>

    <!-- Moderate Dyslexia Learning Path -->
    <div class="screen" id="moderatePath">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Dashboard</button>
        
        <div class="content-card">
            <h2 style="color: var(--primary); margin-bottom: 20px;">Moderate Dyslexia Learning Path</h2>
            <p>Enhanced support with visual aids and adjusted pacing for effective learning.</p>
        </div>

        <div class="module-grid">
            <div class="module-card" onclick="startPhonics('moderate')">
                <div class="icon">🔤</div>
                <h4>Structured Phonics</h4>
                <p>Color-coded sounds</p>
            </div>
            
            <div class="module-card" onclick="startVocabulary('moderate')">
                <div class="icon">🖼️</div>
                <h4>Visual Vocabulary</h4>
                <p>Picture associations</p>
            </div>
            
            <div class="module-card" onclick="startReading('moderate')">
                <div class="icon">📖</div>
                <h4>Guided Reading</h4>
                <p>With highlighting</p>
            </div>
            
            <div class="module-card" onclick="startListening('moderate')">
                <div class="icon">🎧</div>
                <h4>Active Listening</h4>
                <p>With transcripts</p>
            </div>
            
            <div class="module-card" onclick="startSpeaking('moderate')">
                <div class="icon">🎤</div>
                <h4>Speech Practice</h4>
                <p>Record & compare</p>
            </div>
            
            <div class="module-card" onclick="startWriting('moderate')">
                <div class="icon">✍️</div>
                <h4>Structured Writing</h4>
                <p>Templates provided</p>
            </div>
        </div>

        <div class="content-card">
            <h3>Multi-Sensory Word Learning</h3>
            <div class="word-card" style="background: var(--dyslexia-green);">
                <div class="word">
                    <span class="syllable">BEAU</span>
                    <span class="syllable">TI</span>
                    <span class="syllable">FUL</span>
                </div>
                <div class="phonetics">/ˈbjuː.tɪ.fəl/</div>
                <div class="definition">Very attractive or pleasing</div>
                
                <div class="visual-grid" style="margin: 20px 0;">
                    <div class="visual-card">
                        <div class="image">🌺</div>
                        <div class="label">Flower</div>
                    </div>
                    <div class="visual-card">
                        <div class="image">🌅</div>
                        <div class="label">Sunset</div>
                    </div>
                    <div class="visual-card">
                        <div class="image">🦋</div>
                        <div class="label">Butterfly</div>
                    </div>
                </div>
                
                <div class="audio-controls">
                    <button class="audio-btn" onclick="playWord('beautiful')">
                        <span>🔊</span> Play Word
                    </button>
                    <button class="audio-btn" onclick="playSyllables('beautiful')">
                        <span>📣</span> Play Syllables
                    </button>
                    <button class="audio-btn" onclick="playWordSlow('beautiful')">
                        <span>🐌</span> Play Slowly
                    </button>
                </div>
                
                <div class="example">
                    "The <strong>beau-ti-ful</strong> garden has many colors."
                </div>
            </div>
            
            <div class="speed-control">
                <label>Playback Speed:</label>
                <input type="range" id="speedControl" min="50" max="100" value="75">
                <span class="speed-value" id="speedValue">75%</span>
            </div>
            
            <button class="btn btn-full" onclick="practiceWord('beautiful', 'moderate')">Practice With Visual Aids</button>
        </div>
    </div>

    <!-- Severe Dyslexia Learning Path -->
    <div class="screen" id="severePath">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Dashboard</button>
        
        <div class="content-card">
            <h2 style="color: var(--primary); margin-bottom: 20px;">Intensive Support Learning Path</h2>
            <p>Maximum accommodations with complete multi-sensory learning approach.</p>
        </div>

        <div class="module-grid">
            <div class="module-card" onclick="startPhonics('severe')">
                <div class="icon">🌈</div>
                <h4>Multi-Sensory Phonics</h4>
                <p>Touch, see, hear</p>
            </div>
            
            <div class="module-card" onclick="startVocabulary('severe')">
                <div class="icon">🎨</div>
                <h4>Visual Word Maps</h4>
                <p>Mind mapping</p>
            </div>
            
            <div class="module-card" onclick="startReading('severe')">
                <div class="icon">👁️</div>
                <h4>Assisted Reading</h4>
                <p>Line by line</p>
            </div>
            
            <div class="module-card" onclick="startListening('severe')">
                <div class="icon">🎵</div>
                <h4>Musical Learning</h4>
                <p>Rhythm & rhyme</p>
            </div>
            
            <div class="module-card" onclick="startSpeaking('severe')">
                <div class="icon">🎭</div>
                <h4>Drama & Speech</h4>
                <p>Act it out</p>
            </div>
            
            <div class="module-card" onclick="startWriting('severe')">
                <div class="icon">🖊️</div>
                <h4>Trace & Write</h4>
                <p>Motor memory</p>
            </div>
        </div>

        <div class="content-card">
            <h3>Complete Multi-Sensory Learning Station</h3>
            
            <div class="word-card" style="background: linear-gradient(135deg, var(--dyslexia-yellow) 0%, var(--dyslexia-green) 100%);">
                <h4 style="color: var(--primary); margin-bottom: 20px;">Today's Focus Word</h4>
                
                <div class="word" style="font-size: 4em;">
                    <span class="syllable" style="background: #FFE5E5;">HAP</span>
                    <span class="syllable" style="background: #E5F5FF;">PY</span>
                </div>
                
                <div class="phonetics" style="font-size: 2em;">/ˈhæp.i/</div>
                
                <div style="background: white; padding: 20px; border-radius: 15px; margin: 20px 0;">
                    <h4 style="color: var(--primary);">Visual Association</h4>
                    <div style="font-size: 80px; text-align: center; margin: 20px 0;">
                        😊 = HAPPY
                    </div>
                </div>
                
                <div style="background: var(--dyslexia-peach); padding: 20px; border-radius: 15px; margin: 20px 0;">
                    <h4 style="color: var(--primary);">Physical Movement</h4>
                    <p style="font-size: 1.2em; line-height: 1.8;">
                        1. Smile widely when saying "HAP"<br>
                        2. Jump up when saying "PY"<br>
                        3. Clap hands together for the full word
                    </p>
                </div>
                
                <div style="background: var(--dyslexia-blue); padding: 20px; border-radius: 15px; margin: 20px 0;">
                    <h4 style="color: var(--primary);">Memory Story</h4>
                    <p style="font-size: 1.2em; line-height: 1.8;">
                        "The <strong>HAP</strong>py <strong>P</strong>upp<strong>Y</strong> jumps and plays."
                    </p>
                </div>
                
                <div class="audio-controls">
                    <button class="audio-btn" onclick="playWord('happy')">
                        <span>🔊</span> Hear It
                    </button>
                    <button class="audio-btn" onclick="playSyllables('happy')">
                        <span>📢</span> Syllables
                    </button>
                    <button class="audio-btn" onclick="playWordSlow('happy')">
                        <span>🐢</span> Very Slow
                    </button>
                    <button class="audio-btn" onclick="playRhythm('happy')">
                        <span>🥁</span> Rhythm
                    </button>
                </div>
                
                <div class="exercise-container">
                    <h4>Drag Letters to Build the Word</h4>
                    <div class="drag-area" id="dropZone">
                        Drop letters here
                    </div>
                    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
                        <div class="draggable-word" draggable="true">H</div>
                        <div class="draggable-word" draggable="true">A</div>
                        <div class="draggable-word" draggable="true">P</div>
                        <div class="draggable-word" draggable="true">P</div>
                        <div class="draggable-word" draggable="true">Y</div>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-success btn-full" onclick="practiceWord('happy', 'severe')">
                Start Full Sensory Practice
            </button>
        </div>
    </div>

    <!-- Phonics Module -->
    <div class="screen" id="phonicsModule">
        <button class="back-button" onclick="goBackFromModule()">← Back to Learning Path</button>
        
        <div class="content-card">
            <h2 style="color: var(--primary);">Phonics Training</h2>
            <p id="phonicsLevel">Customized for your learning needs</p>
        </div>

        <div class="content-card">
            <h3>Sound-Letter Connections</h3>
            
            <div class="visual-grid">
                <div class="visual-card" onclick="playSound('a')">
                    <div style="font-size: 80px; color: var(--primary); font-weight: bold;">A</div>
                    <div class="label">/æ/ as in Apple</div>
                </div>
                <div class="visual-card" onclick="playSound('b')">
                    <div style="font-size: 80px; color: var(--primary); font-weight: bold;">B</div>
                    <div class="label">/b/ as in Ball</div>
                </div>
                <div class="visual-card" onclick="playSound('c')">
                    <div style="font-size: 80px; color: var(--primary); font-weight: bold;">C</div>
                    <div class="label">/k/ as in Cat</div>
                </div>
                <div class="visual-card" onclick="playSound('d')">
                    <div style="font-size: 80px; color: var(--primary); font-weight: bold;">D</div>
                    <div class="label">/d/ as in Dog</div>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h3>Blending Practice</h3>
            <div class="exercise-container">
                <h4>Click sounds in order to blend</h4>
                <div style="display: flex; gap: 20px; justify-content: center; margin: 30px 0;">
                    <button class="audio-btn" onclick="playSound('c')" style="font-size: 2em; padding: 20px;">C</button>
                    <button class="audio-btn" onclick="playSound('a')" style="font-size: 2em; padding: 20px;">A</button>
                    <button class="audio-btn" onclick="playSound('t')" style="font-size: 2em; padding: 20px;">T</button>
                </div>
                <button class="btn btn-secondary" onclick="playBlendedWord('cat')">
                    Play Complete Word: CAT
                </button>
            </div>
        </div>

        <div class="content-card">
            <h3>Common Letter Patterns</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                <div style="background: var(--dyslexia-yellow); padding: 20px; border-radius: 15px; text-align: center;">
                    <h4 style="color: var(--primary);">-ing</h4>
                    <p style="font-size: 1.2em;">sing, ring, bring</p>
                </div>
                <div style="background: var(--dyslexia-blue); padding: 20px; border-radius: 15px; text-align: center;">
                    <h4 style="color: var(--primary);">-tion</h4>
                    <p style="font-size: 1.2em;">nation, station</p>
                </div>
                <div style="background: var(--dyslexia-green); padding: 20px; border-radius: 15px; text-align: center;">
                    <h4 style="color: var(--primary);">-ight</h4>
                    <p style="font-size: 1.2em;">light, night, right</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Vocabulary Module -->
    <div class="screen" id="vocabularyModule">
        <button class="back-button" onclick="goBackFromModule()">← Back to Learning Path</button>
        
        <div class="content-card">
            <h2 style="color: var(--primary);">Vocabulary Building</h2>
            <p id="vocabularyLevel">Visual and contextual learning</p>
        </div>

        <div class="content-card">
            <h3>Word Categories</h3>
            
            <div class="module-grid">
                <div class="module-card" onclick="loadVocabularyCategory('emotions')">
                    <div class="icon">😊</div>
                    <h4>Emotions</h4>
                </div>
                <div class="module-card" onclick="loadVocabularyCategory('food')">
                    <div class="icon">🍎</div>
                    <h4>Food</h4>
                </div>
                <div class="module-card" onclick="loadVocabularyCategory('actions')">
                    <div class="icon">🏃</div>
                    <h4>Actions</h4>
                </div>
                <div class="module-card" onclick="loadVocabularyCategory('places')">
                    <div class="icon">🏠</div>
                    <h4>Places</h4>
                </div>
            </div>
        </div>

        <div class="content-card" id="categoryContent" style="display: none;">
            <!-- Category content loads here -->
        </div>

        <div class="content-card">
            <h3>Word Association Map</h3>
            <div style="background: var(--dyslexia-blue); padding: 30px; border-radius: 20px; text-align: center;">
                <div style="font-size: 2em; font-weight: bold; color: var(--primary); margin-bottom: 30px;">WATER</div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                    <div style="background: white; padding: 15px; border-radius: 10px;">
                        <div>💧</div>
                        <div>Drink</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 10px;">
                        <div>🌊</div>
                        <div>Ocean</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 10px;">
                        <div>🚿</div>
                        <div>Shower</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 10px;">
                        <div>🏊</div>
                        <div>Swim</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 10px;">
                        <div>❄️</div>
                        <div>Ice</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 10px;">
                        <div>☔</div>
                        <div>Rain</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Reading Module -->
    <div class="screen" id="readingModule">
        <button class="back-button" onclick="goBackFromModule()">← Back to Learning Path</button>
        
        <div class="content-card">
            <h2 style="color: var(--primary);">Reading Practice</h2>
            <p id="readingLevel">Guided reading with support tools</p>
        </div>

        <div class="content-card">
            <h3>Today's Reading Passage</h3>
            
            <div style="background: var(--dyslexia-yellow); padding: 30px; border-radius: 20px; font-size: 1.3em; line-height: 2.5;">
                <p id="readingText">
                    The <span class="highlight-focus">sun</span> is shining today. 
                    It is a <span class="highlight-focus">beautiful</span> day. 
                    I will go to the <span class="highlight-focus">park</span>. 
                    I like to <span class="highlight-focus">walk</span> in the park. 
                    The <span class="highlight-focus">birds</span> are singing. 
                    The <span class="highlight-focus">flowers</span> are pretty.
                </p>
            </div>
            
            <div class="audio-controls">
                <button class="audio-btn" onclick="readPassage()">
                    <span>🔊</span> Read Aloud
                </button>
                <button class="audio-btn" onclick="readPassageWithHighlight()">
                    <span>👁️</span> Read & Highlight
                </button>
                <button class="audio-btn" onclick="readPassageSentence()">
                    <span>📝</span> Sentence by Sentence
                </button>
            </div>
        </div>

        <div class="content-card">
            <h3>Comprehension Check</h3>
            <div class="form-group">
                <label>What is the weather like?</label>
                <div style="display: grid; gap: 15px;">
                    <button class="btn btn-secondary" onclick="checkAnswer('sunny', true)">☀️ Sunny</button>
                    <button class="btn btn-secondary" onclick="checkAnswer('rainy', false)">🌧️ Rainy</button>
                    <button class="btn btn-secondary" onclick="checkAnswer('cloudy', false)">☁️ Cloudy</button>
                </div>
            </div>
            
            <div id="answerFeedback" style="margin-top: 20px;"></div>
        </div>
    </div>

    <!-- Crisis Support -->
    <div class="screen" id="crisis">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Dashboard</button>
        
        <div class="content-card" style="border: 3px solid var(--danger);">
            <h2 style="color: var(--danger);">Need Help?</h2>
            <p>Learning differences can be frustrating, but support is available.</p>
            
            <div style="background: var(--dyslexia-peach); padding: 20px; border-radius: 15px; margin: 20px 0;">
                <h3>Remember:</h3>
                <ul style="line-height: 2; margin-left: 20px;">
                    <li>✓ Dyslexia is a difference, not a deficit</li>
                    <li>✓ Many successful people have dyslexia</li>
                    <li>✓ You can learn at your own pace</li>
                    <li>✓ Your intelligence is not defined by reading speed</li>
                </ul>
            </div>
            
            <h3>Support Resources</h3>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>📞 Contact your local adult education center</li>
                <li>🌐 International Dyslexia Association</li>
                <li>📚 Local library literacy programs</li>
                <li>👥 Online dyslexia support groups</li>
            </ul>
        </div>
    </div>

    <!-- Resources -->
    <div class="screen" id="resources">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Dashboard</button>
        
        <div class="content-card">
            <h2 style="color: var(--primary);">Learning Resources</h2>
            
            <h3>Downloadable Materials</h3>
            <div style="display: grid; gap: 15px; margin: 20px 0;">
                <button class="btn btn-secondary" onclick="downloadResource('phonics-chart')">
                    📊 Phonics Reference Chart
                </button>
                <button class="btn btn-secondary" onclick="downloadResource('word-lists')">
                    📝 High-Frequency Word Lists
                </button>
                <button class="btn btn-secondary" onclick="downloadResource('strategies')">
                    💡 Dyslexia Learning Strategies
                </button>
            </div>
            
            <h3>Recommended Tools</h3>
            <ul style="line-height: 2; margin: 20px;">
                <li>🔤 OpenDyslexic font for all devices</li>
                <li>📱 Text-to-speech apps</li>
                <li>🖊️ Colored overlays for reading</li>
                <li>⏰ Pomodoro timer for focused study</li>
                <li>📓 Grid notebooks for writing practice</li>
            </ul>
            
            <h3>External Support</h3>
            <ul style="line-height: 2; margin: 20px;">
                <li>• Dyslexia tutoring services</li>
                <li>• Adult literacy programs</li>
                <li>• ESL classes with dyslexia support</li>
                <li>• Assistive technology training</li>
            </ul>
        </div>
    </div>

    <!-- Info -->
    <div class="screen" id="info">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Dashboard</button>
        
        <div class="content-card">
            <h2 style="color: var(--primary);">About LinguaLight</h2>
            
            <h3>What This App Does</h3>
            <p>LinguaLight provides comprehensive English language learning specifically designed for adults with dyslexia, featuring:</p>
            <ul style="line-height: 2; margin: 20px;">
                <li>• Multi-sensory learning approaches</li>
                <li>• Customizable display settings</li>
                <li>• Three levels of dyslexia support</li>
                <li>• Progress tracking at your own pace</li>
                <li>• Visual, auditory, and kinesthetic exercises</li>
                <li>• Phonics-based instruction</li>
                <li>• Repetition and reinforcement tools</li>
            </ul>
            
            <h3>How to Use This App</h3>
            <ol style="line-height: 2; margin: 20px;">
                <li>Select your support level (mild, moderate, or severe)</li>
                <li>Customize display settings using the toolbar</li>
                <li>Choose a learning module</li>
                <li>Practice at your own pace</li>
                <li>Track your progress</li>
                <li>Repeat lessons as needed</li>
            </ol>
            
            <h3>Privacy & Data</h3>
            <p>• All data stored locally on your device</p>
            <p>• No personal information transmitted</p>
            <p>• Progress tracking is private</p>
            <p>• Safe learning environment</p>
        </div>
    </div>

    <!-- About -->
    <div class="screen" id="about">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Dashboard</button>
        
        <div class="content-card">
            <h2 style="color: var(--primary);">About Depths to Heights</h2>
            
            <h3>Our Mission</h3>
            <p>Depths to Heights creates accessible educational and mental health resources that meet people where they are and guide them toward their goals. We believe everyone deserves the opportunity to learn and grow, regardless of learning differences.</p>
            
            <h3>Created By</h3>
            <p><strong>Made by Justin</strong></p>
            <p>Dedicated to making education accessible for all learners, including those with dyslexia and other learning differences.</p>
            
            <h3>Contact</h3>
            <p><strong>Website:</strong> <a href="https://depthstoheights.org" target="_blank">depthstoheights.org</a></p>
            <p><strong>Email:</strong> depthstoheights@gmail.com</p>
            
            <h3>Support Our Work</h3>
            <p>Help us create more accessible learning tools for adults with learning differences.</p>
            <button class="btn" onclick="window.open('https://www.paypal.com/donate/?hosted_button_id=8GRE7B8C3TP2U', '_blank')">
                Donate via PayPal
            </button>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="navigateTo('dashboard')">
            <span class="icon">🏠</span>
            <span class="label">Home</span>
        </div>
        <div class="nav-item" onclick="navigateTo('crisis')">
            <span class="icon">💬</span>
            <span class="label">Support</span>
        </div>
        <div class="nav-item" onclick="navigateTo('resources')">
            <span class="icon">📚</span>
            <span class="label">Resources</span>
        </div>
        <div class="nav-item" onclick="navigateTo('info')">
            <span class="icon">ℹ️</span>
            <span class="label">Info</span>
        </div>
        <div class="nav-item" onclick="navigateTo('about')">
            <span class="icon">✨</span>
            <span class="label">About</span>
        </div>
    </div>

    <script>
        // App Data
        let appData = {
            currentLevel: 'mild',
            wordsLearned: 0,
            lessonsCompleted: 0,
            practiceMinutes: 0,
            streakDays: 0,
            progress: {},
            settings: {
                fontSize: 'normal',
                lineSpacing: 'normal',
                background: 'cream',
                dyslexicFont: false,
                highContrast: false,
                rulerActive: false,
                speechRate: 0.75
            },
            lastModule: '',
            startTime: Date.now()
        };

        // Word Database
        const wordDatabase = {
            friend: { phonetics: '/frend/', audio: 'friend.mp3', syllables: ['friend'] },
            beautiful: { phonetics: '/ˈbjuː.tɪ.fəl/', audio: 'beautiful.mp3', syllables: ['beau', 'ti', 'ful'] },
            happy: { phonetics: '/ˈhæp.i/', audio: 'happy.mp3', syllables: ['hap', 'py'] },
            water: { phonetics: '/ˈwɔː.tər/', audio: 'water.mp3', syllables: ['wa', 'ter'] },
            cat: { phonetics: '/kæt/', audio: 'cat.mp3', syllables: ['cat'] }
        };

        // Vocabulary Categories
        const vocabularyCategories = {
            emotions: {
                words: [
                    { word: 'happy', icon: '😊', definition: 'feeling pleasure or joy' },
                    { word: 'sad', icon: '😢', definition: 'feeling sorrow or unhappy' },
                    { word: 'angry', icon: '😠', definition: 'feeling strong displeasure' },
                    { word: 'excited', icon: '🤗', definition: 'feeling enthusiasm and eagerness' },
                    { word: 'calm', icon: '😌', definition: 'peaceful and quiet' }
                ]
            },
            food: {
                words: [
                    { word: 'apple', icon: '🍎', definition: 'a round fruit that is red or green' },
                    { word: 'bread', icon: '🍞', definition: 'baked food made from flour' },
                    { word: 'water', icon: '💧', definition: 'clear liquid we drink' },
                    { word: 'milk', icon: '🥛', definition: 'white drink from cows' },
                    { word: 'rice', icon: '🍚', definition: 'small white grains we cook and eat' }
                ]
            },
            actions: {
                words: [
                    { word: 'walk', icon: '🚶', definition: 'move on foot at regular pace' },
                    { word: 'run', icon: '🏃', definition: 'move fast on foot' },
                    { word: 'eat', icon: '🍽️', definition: 'put food in mouth and swallow' },
                    { word: 'sleep', icon: '😴', definition: 'rest with eyes closed' },
                    { word: 'read', icon: '📖', definition: 'look at words and understand them' }
                ]
            },
            places: {
                words: [
                    { word: 'home', icon: '🏠', definition: 'where you live' },
                    { word: 'school', icon: '🏫', definition: 'where people learn' },
                    { word: 'park', icon: '🌳', definition: 'outdoor area with grass and trees' },
                    { word: 'store', icon: '🏪', definition: 'where you buy things' },
                    { word: 'hospital', icon: '🏥', definition: 'where sick people get help' }
                ]
            }
        };

        // Initialize App
        function initApp() {
            loadData();
            updateDashboard();
            setupAccessibility();
            trackTime();
        }

        // Load saved data
        function loadData() {
            const saved = localStorage.getItem('linguaLightData');
            if (saved) {
                try {
                    appData = JSON.parse(saved);
                } catch (e) {
                    console.log('Starting fresh');
                }
            }
        }

        // Save data
        function saveData() {
            localStorage.setItem('linguaLightData', JSON.stringify(appData));
        }

        // Track practice time
        function trackTime() {
            setInterval(() => {
                const elapsed = Math.floor((Date.now() - appData.startTime) / 60000);
                if (elapsed > 0) {
                    appData.practiceMinutes++;
                    saveData();
                    updateDashboard();
                }
            }, 60000);
        }

        // Navigation
        function startApp() {
            showScreen('dashboard');
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            const screen = document.getElementById(screenId);
            if (screen) {
                screen.classList.add('active');
                updateBottomNav(screenId);
                window.scrollTo(0, 0);
            }
        }

        function navigateTo(screenId) {
            showScreen(screenId);
        }

        function updateBottomNav(screenId) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const navMap = {
                'dashboard': 0,
                'openingScreen': 0,
                'crisis': 1,
                'resources': 2,
                'info': 3,
                'about': 4
            };
            
            const navIndex = navMap[screenId];
            if (navIndex !== undefined) {
                document.querySelectorAll('.nav-item')[navIndex].classList.add('active');
            }
        }

        // Dashboard Functions
        function updateDashboard() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('dashboardDate').textContent = now.toLocaleDateString('en-US', options);
            
            // Update stats
            document.getElementById('wordsLearned').textContent = appData.wordsLearned;
            document.getElementById('lessonsCompleted').textContent = appData.lessonsCompleted;
            document.getElementById('practiceMinutes').textContent = appData.practiceMinutes;
            document.getElementById('streakDays').textContent = appData.streakDays;
            
            // Update progress bar
            const progress = Math.min((appData.wordsLearned * 2) + (appData.lessonsCompleted * 10), 100);
            const progressBar = document.getElementById('mainProgress');
            if (progressBar) {
                progressBar.style.width = progress + '%';
                progressBar.textContent = progress + '%';
            }
        }

        // Severity Selection
        function selectSeverity(level) {
            appData.currentLevel = level;
            saveData();
            
            if (level === 'mild') {
                showScreen('mildPath');
            } else if (level === 'moderate') {
                showScreen('moderatePath');
            } else if (level === 'severe') {
                showScreen('severePath');
            }
            
            showMessage(`Selected ${level} support level`, 'success');
        }

        // Module Navigation
        function goBackFromModule() {
            if (appData.currentLevel === 'mild') {
                showScreen('mildPath');
            } else if (appData.currentLevel === 'moderate') {
                showScreen('moderatePath');
            } else {
                showScreen('severePath');
            }
        }

        // Module Starters
        function startPhonics(level) {
            appData.lastModule = 'phonics';
            document.getElementById('phonicsLevel').textContent = `Phonics training for ${level} dyslexia support`;
            showScreen('phonicsModule');
        }

        function startVocabulary(level) {
            appData.lastModule = 'vocabulary';
            document.getElementById('vocabularyLevel').textContent = `Vocabulary building for ${level} dyslexia support`;
            showScreen('vocabularyModule');
        }

        function startReading(level) {
            appData.lastModule = 'reading';
            document.getElementById('readingLevel').textContent = `Reading practice for ${level} dyslexia support`;
            showScreen('readingModule');
        }

        function startListening(level) {
            showMessage('Listening module: Audio exercises with visual support', 'info');
            appData.lessonsCompleted++;
            saveData();
            updateDashboard();
        }

        function startSpeaking(level) {
            showMessage('Speaking module: Record and compare pronunciation', 'info');
            appData.lessonsCompleted++;
            saveData();
            updateDashboard();
        }

        function startWriting(level) {
            showMessage('Writing module: Guided writing with templates', 'info');
            appData.lessonsCompleted++;
            saveData();
            updateDashboard();
        }

        // Word Practice Functions
        function practiceWord(word, level) {
            appData.wordsLearned++;
            saveData();
            updateDashboard();
            
            showMessage(`Great job practicing "${word}"! Keep going!`, 'success');
            
            // Simulate different practice based on level
            if (level === 'severe') {
                showMessage('Complete multi-sensory practice activated', 'info');
            } else if (level === 'moderate') {
                showMessage('Visual aids and syllable breakdown provided', 'info');
            } else {
                showMessage('Standard practice completed', 'info');
            }
        }

        // Audio Functions
        function playWord(word) {
            speak(word, 1.0);
            showMessage(`Playing: ${word}`, 'info');
        }

        function playWordSlow(word) {
            speak(word, 0.5);
            showMessage(`Playing slowly: ${word}`, 'info');
        }

        function playSyllables(word) {
            const syllables = wordDatabase[word]?.syllables || [word];
            let delay = 0;
            syllables.forEach(syllable => {
                setTimeout(() => {
                    speak(syllable, 0.7);
                }, delay);
                delay += 1000;
            });
            showMessage(`Playing syllables: ${syllables.join('-')}`, 'info');
        }

        function playRhythm(word) {
            const syllables = wordDatabase[word]?.syllables || [word];
            showMessage(`Rhythm pattern: ${syllables.map(() => '👏').join(' ')}`, 'info');
        }

        function playSound(letter) {
            const sounds = {
                'a': 'ah', 'b': 'buh', 'c': 'kuh', 'd': 'duh',
                'e': 'eh', 'f': 'fuh', 'g': 'guh', 'h': 'huh',
                'i': 'ih', 'j': 'juh', 'k': 'kuh', 'l': 'luh',
                'm': 'muh', 'n': 'nuh', 'o': 'oh', 'p': 'puh',
                'q': 'kwuh', 'r': 'ruh', 's': 'suh', 't': 'tuh',
                'u': 'uh', 'v': 'vuh', 'w': 'wuh', 'x': 'ks',
                'y': 'yuh', 'z': 'zuh'
            };
            speak(sounds[letter.toLowerCase()] || letter, 0.7);
        }

        function playBlendedWord(word) {
            speak(word, 0.8);
            showMessage(`Blended word: ${word}`, 'success');
        }

        // Text-to-Speech
        function speak(text, rate = 1.0) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = rate * appData.settings.speechRate;
                utterance.pitch = 1.0;
                utterance.volume = 1.0;
                speechSynthesis.speak(utterance);
            }
        }

        // Reading Functions
        function readPassage() {
            const text = document.getElementById('readingText').textContent;
            speak(text, 0.8);
            showMessage('Reading entire passage', 'info');
        }

        function readPassageWithHighlight() {
            const text = document.getElementById('readingText');
            const words = text.textContent.split(' ');
            let index = 0;
            
            const interval = setInterval(() => {
                if (index >= words.length) {
                    clearInterval(interval);
                    return;
                }
                
                // Highlight current word
                const highlighted = words.map((word, i) => 
                    i === index ? `<span style="background: yellow; padding: 2px;">${word}</span>` : word
                ).join(' ');
                
                text.innerHTML = highlighted;
                speak(words[index], 0.8);
                index++;
            }, 1000);
            
            showMessage('Reading with word highlighting', 'info');
        }

        function readPassageSentence() {
            showMessage('Reading sentence by sentence', 'info');
            const sentences = [
                "The sun is shining today.",
                "It is a beautiful day.",
                "I will go to the park.",
                "I like to walk in the park.",
                "The birds are singing.",
                "The flowers are pretty."
            ];
            
            let index = 0;
            sentences.forEach((sentence, i) => {
                setTimeout(() => {
                    speak(sentence, 0.7);
                    showMessage(`Sentence ${i + 1}: ${sentence}`, 'info');
                }, i * 3000);
            });
        }

        function checkAnswer(answer, isCorrect) {
            const feedback = document.getElementById('answerFeedback');
            if (isCorrect) {
                feedback.innerHTML = '<div class="message success">Correct! The weather is sunny. ☀️</div>';
                appData.lessonsCompleted++;
                saveData();
                updateDashboard();
            } else {
                feedback.innerHTML = '<div class="message warning">Try again! Look for clues about the weather.</div>';
            }
        }

        // Vocabulary Functions
        function loadVocabularyCategory(category) {
            const content = document.getElementById('categoryContent');
            const categoryData = vocabularyCategories[category];
            
            if (!categoryData) return;
            
            content.style.display = 'block';
            content.innerHTML = `
                <h3>${category.charAt(0).toUpperCase() + category.slice(1)} Vocabulary</h3>
                <div class="visual-grid">
                    ${categoryData.words.map(item => `
                        <div class="visual-card" onclick="learnWord('${item.word}')">
                            <div class="image">${item.icon}</div>
                            <div class="label">${item.word.toUpperCase()}</div>
                            <div style="font-size: 0.9em; color: var(--light-text); margin-top: 10px;">
                                ${item.definition}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            showMessage(`Loaded ${category} vocabulary`, 'success');
        }

        function learnWord(word) {
            speak(word, 0.8);
            appData.wordsLearned++;
            saveData();
            updateDashboard();
            showMessage(`Learning: ${word}`, 'info');
        }

        // Accessibility Functions
        function setupAccessibility() {
            // Apply saved settings
            if (appData.settings.dyslexicFont) {
                document.body.classList.add('dyslexic-font');
            }
            if (appData.settings.highContrast) {
                document.body.classList.add('high-contrast');
            }
            
            // Setup reading ruler
            if (appData.settings.rulerActive) {
                document.getElementById('readingRuler').classList.add('active');
            }
            
            // Mouse tracking for ruler
            document.addEventListener('mousemove', (e) => {
                if (appData.settings.rulerActive) {
                    const ruler = document.getElementById('readingRuler');
                    ruler.style.top = (e.clientY - 20) + 'px';
                }
            });
            
            // Speed control
            const speedControl = document.getElementById('speedControl');
            if (speedControl) {
                speedControl.addEventListener('input', (e) => {
                    appData.settings.speechRate = e.target.value / 100;
                    document.getElementById('speedValue').textContent = e.target.value + '%';
                    saveData();
                });
            }
        }

        function toggleDyslexicFont() {
            document.body.classList.toggle('dyslexic-font');
            appData.settings.dyslexicFont = !appData.settings.dyslexicFont;
            saveData();
            showMessage('Dyslexic font ' + (appData.settings.dyslexicFont ? 'enabled' : 'disabled'), 'info');
        }

        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
            appData.settings.highContrast = !appData.settings.highContrast;
            saveData();
            showMessage('High contrast ' + (appData.settings.highContrast ? 'enabled' : 'disabled'), 'info');
        }

        function toggleRuler() {
            const ruler = document.getElementById('readingRuler');
            ruler.classList.toggle('active');
            appData.settings.rulerActive = !appData.settings.rulerActive;
            saveData();
            showMessage('Reading ruler ' + (appData.settings.rulerActive ? 'enabled' : 'disabled'), 'info');
        }

        function increaseFontSize() {
            const sizes = ['normal', 'large', 'extra-large'];
            const currentIndex = sizes.indexOf(appData.settings.fontSize);
            const nextIndex = (currentIndex + 1) % sizes.length;
            
            document.body.classList.remove('font-large', 'font-extra-large');
            if (sizes[nextIndex] !== 'normal') {
                document.body.classList.add('font-' + sizes[nextIndex]);
            }
            
            appData.settings.fontSize = sizes[nextIndex];
            saveData();
            showMessage(`Font size: ${sizes[nextIndex]}`, 'info');
        }

        function increaseLineSpacing() {
            const spacings = ['normal', 'large', 'extra'];
            const currentIndex = spacings.indexOf(appData.settings.lineSpacing);
            const nextIndex = (currentIndex + 1) % spacings.length;
            
            document.body.classList.remove('line-spacing-large', 'line-spacing-extra');
            if (spacings[nextIndex] !== 'normal') {
                document.body.classList.add('line-spacing-' + spacings[nextIndex]);
            }
            
            appData.settings.lineSpacing = spacings[nextIndex];
            saveData();
            showMessage(`Line spacing: ${spacings[nextIndex]}`, 'info');
        }

        function changeBackground() {
            const backgrounds = [
                { name: 'cream', color: '#FFF8E7' },
                { name: 'yellow', color: '#FFFACD' },
                { name: 'blue', color: '#E6F3FF' },
                { name: 'green', color: '#E8F5E9' },
                { name: 'peach', color: '#FFE5CC' },
                { name: 'white', color: '#FFFFFF' }
            ];
            
            const currentIndex = backgrounds.findIndex(bg => bg.name === appData.settings.background);
            const nextIndex = (currentIndex + 1) % backgrounds.length;
            
            document.body.style.background = backgrounds[nextIndex].color;
            appData.settings.background = backgrounds[nextIndex].name;
            saveData();
            showMessage(`Background: ${backgrounds[nextIndex].name}`, 'info');
        }

        // Download Resources
        function downloadResource(type) {
            const resources = {
                'phonics-chart': 'Phonics Reference Chart - Letter sounds and combinations',
                'word-lists': 'High-Frequency Word Lists - Most common English words',
                'strategies': 'Dyslexia Learning Strategies - Tips and techniques'
            };
            
            showMessage(`Downloading: ${resources[type]}`, 'success');
            
            // Simulate download
            setTimeout(() => {
                showMessage('Download complete! Check your downloads folder.', 'success');
            }, 1500);
        }

        // Message System
        function showMessage(text, type = 'info') {
            const message = document.createElement('div');
            message.className = `message ${type}`;
            message.textContent = text;
            
            const activeScreen = document.querySelector('.screen.active');
            if (activeScreen) {
                // Remove existing messages
                const existingMessage = activeScreen.querySelector('.message');
                if (existingMessage) {
                    existingMessage.remove();
                }
                
                // Find insertion point
                let insertPoint = activeScreen.querySelector('.back-button');
                if (!insertPoint) {
                    insertPoint = activeScreen.querySelector('.content-card');
                }
                
                if (insertPoint) {
                    insertPoint.parentNode.insertBefore(message, insertPoint.nextSibling);
                } else {
                    activeScreen.insertBefore(message, activeScreen.firstChild);
                }
                
                // Auto-remove
                setTimeout(() => {
                    message.remove();
                }, 4000);
            }
        }

        // Drag and Drop Setup
        function setupDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable-word');
            const dropZone = document.getElementById('dropZone');
            
            if (!dropZone) return;
            
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text', e.target.textContent);
                    e.target.style.opacity = '0.5';
                });
                
                draggable.addEventListener('dragend', (e) => {
                    e.target.style.opacity = '1';
                });
            });
            
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.style.background = '#E8F5E9';
            });
            
            dropZone.addEventListener('dragleave', () => {
                dropZone.style.background = 'white';
            });
            
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                const letter = e.dataTransfer.getData('text');
                
                if (dropZone.textContent === 'Drop letters here') {
                    dropZone.textContent = '';
                }
                
                dropZone.innerHTML += `<span class="draggable-word" style="margin: 5px;">${letter}</span>`;
                dropZone.style.background = 'white';
                
                // Check if word is complete
                const currentWord = dropZone.textContent.replace(/\s/g, '');
                if (currentWord === 'HAPPY') {
                    showMessage('Excellent! You spelled HAPPY correctly!', 'success');
                    appData.wordsLearned++;
                    saveData();
                    updateDashboard();
                }
            });
        }

        // Initialize on load
        window.addEventListener('load', function() {
            initApp();
            setupDragAndDrop();
            
            // Auto-save every 30 seconds
            setInterval(saveData, 30000);
            
            // Save on unload
            window.addEventListener('beforeunload', saveData);
        });

        // Prevent double-tap zoom on mobile
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
                    